{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="{% static 'CSS/style.css' %}">
    <link rel="stylesheet" href="{% static 'CSS/fonts.css' %}">
    <link rel="icon" href="{% static '../media/images/blacklogotext.png' %}">
    <meta name="viewport" content="width=device-width, initial-scale=0.7">
    <script>
        console.warn("AMBMUN Site Version: v20");
    </script>
    {% block style%}

    {% endblock %}
</head>

<body>
    <div class="navbarcontainer" id="navbar">
        <div class="navbar">
            <div class="navbarcontent">
                <a class="subtlelink" href="{% url 'home' %}">
                    <img style="width: 60px;" src="{% static '../media/images/blacklogotext.png' %}" alt="AMBMUN Logo">
                </a>
                <h1 class="title navbar" style="color: black;">AL MAWAKEB BARSHA MODEL UNITED NATIONS</h1>
            </div>
        </div>
        <div class="navbarlinks">
            <a href="{% url 'schedule' %}" class="headertext">Schedule</a>
            <a href="{% url 'rules' %}" class="headertext">Procedures</a>
            <a href="{% url 'committees' %}" class="headertext">Committees</a>
            <a href="{% url 'gallery' %}" class="headertext">Gallery</a>
            <a href="{% url 'contact' %}" class="headertext">Contact</a>
            <a href="{% url 'faq' %}" class="headertext">FAQ</a>
        </div>
    </div>
    <div id="mobilenavbar" class="navbarcontainer" hidden>
        <div class="navbar">
            <div class="navbarcontent">
                <a class="subtlelink" href="{% url 'home' %}">
                    <img style="width: 60px;" src="{% static '../media/images/blacklogotext.png' %}" alt="AMBMUN Logo">
                </a>
                <h1 class="title navbar" style="color: black;">AMBMUN</h1>
                <button id="mobilenavtoggle" onclick="toggleDrawer(false)">
                    <svg xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg>
                </button>
            </div>
        </div>
        <div class="navbarlinks">
            
        </div>
    </div>
    <div id="mobilenavdrawer" hidden>
        <div id="mobilenavdrawercontent" hidden>
            <a href="{% url 'home' %}" class="headertext mobile">HOME</a>
            <a href="{% url 'schedule' %}" class="headertext mobile">SCHEDULE</a>
            <a href="{% url 'rules' %}" class="headertext mobile">PROCEDURES</a>
            <a href="{% url 'committees' %}" class="headertext mobile">COMMITTEES</a>
            <a href="{% url 'gallery' %}" class="headertext mobile">GALLERY</a>
            <a href="{% url 'contact' %}" class="headertext mobile">CONTACT</a>
            <a href="{% url 'faq' %}" class="headertext mobile">FAQ</a>
        </div>
        <div onclick="toggleDrawer(true)" style="width: 30%; height: 100%; background-color: transparent;"></div>
    </div>
    {% block content %}{% endblock %}

    <script>
        var rulesTableDetected = false;
        var userAgent = navigator.userAgent;
        if (userAgent.toLowerCase().indexOf("iphone") > -1 || userAgent.toLowerCase().indexOf("android") > -1) {
            document.body.addEventListener('touchstart', function (event) {
                console.log("Touch Started");
                touchstartX = event.changedTouches[0].screenX;
                touchstartY = event.changedTouches[0].screenY;
            }, false);

            document.body.addEventListener('touchend', function (event) {
                touchendX = event.changedTouches[0].screenX;
                touchendY = event.changedTouches[0].screenY;
                // console.log(event.srcElement.parentElement.parentElement.parentElement.parentElement.classList.contains("rulestablesource"));
                if(event.srcElement.parentElement != null && event.srcElement.parentElement.parentElement != null && event.srcElement.parentElement.parentElement.parentElement != null && event.srcElement.parentElement.parentElement.parentElement.parentElement != null) {
                    if(!event.srcElement.parentElement.parentElement.parentElement.parentElement.classList.contains("rulestablesource")) {
                        handleGesture();
                    }
                }
                else {
                    handleGesture();
                }
                {% comment %} handleGesture(); {% endcomment %}
            }, false);
        }

        function handleGesture() {
            if (touchendX < touchstartX - 50 && touchendY >= touchstartY - 30 && touchendY <= touchstartY + 30) {
                console.log('Swiped Left');
                toggleDrawer(true);
            }

            if (touchendX > touchstartX + 50 && touchendY >= touchstartY - 30 && touchendY <= touchstartY + 30) {
                console.log('Swiped Right');
                toggleDrawer(false);
            }

            if (touchendY < touchstartY) {
                console.log('Swiped Up');
            }

            if (touchendY > touchstartY) {
                console.log('Swiped Down');
            }

            if (touchendY === touchstartY) {
                console.log('Tap');
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        {% comment %} window.addEventListener("scroll", (event) => {
            let scroll = this.scrollY;
            // console.log(scroll);
            for (var i = 0; i < document.getElementsByClassName("navbar").length; i++) {
                document.getElementsByClassName("navbar")[i].classList.toggle("issticky", scroll > 0);
                document.getElementById("navbarseparator").hidden = scroll > 0;
                document.getElementById("mobilenavbarseparator").hidden = scroll > 0;
            }
        }); {% endcomment %}
        function toggleDrawer(value) {
            var drawer = document.getElementById('mobilenavdrawer');
            var drawercontent = document.getElementById('mobilenavdrawercontent');
            if (value) {
                drawer.style.animation = "navbarmovefront ease-out 0.5s";
                drawer.style.backgroundColor = "rgba(105, 105, 105, 0)";
                drawercontent.style.animation = "navbarmovefront ease-out 0.5s";
            }
            else {
                drawer.style.animation = "navbarmoveback ease-out 0.3s";
                drawer.style.backgroundColor = "rgba(105, 105, 105, 0.5)";
                drawercontent.style.animation = "navbarmoveback ease-out 0.3s";
            }
            setTimeout(function () {
                drawer.hidden = value;
                drawercontent.hidden = value;
            }, 300);
        }
    </script>

    <footer style="padding: 20px 50px 10px; margin-top: 200px;">
        <div class="centerer">
            <div class="flexcontainer" style="color: white; margin-left: 25px; margin-right: 25px;">
                <div class="halfflexchild">
                    <div style="display: flex; align-items: center;">
                        <a href="{% url 'home' %}" style="padding-bottom: 0;">
                            <img src="{% static '../media/images/ambmunlogowhite.png' %}" alt="AMBMUN Logo"
                                style="padding-bottom: 0;" width="70" height="60">
                        </a>
                        <svg style="margin-left: 20px; margin-right: 20px;" width="1" height="30" viewBox="0 0 1 30"
                            fill="none" xmlns="http://www.w3.org/2000/svg">
                            <line x1="0.5" y1="30" x2="0.5" stroke="white" />
                        </svg>
                        <a href="https://www.instagram.com/amb.mun" target="_blank" style="padding-bottom: 0;">
                            <img width="24" src="{% static '../media/images/instagramlogo.png' %}">
                        </a>
                    </div>
                    <p>Al Mawakeb Al Barsha<br> Dubai, UAE</p>
                    {% comment %} <h3 class="amicfont">Website by <a href="https://amic.amb.sch.ae">AMIC</a></h3> {% endcomment %}
                    <h3 class="amicfont">Website by Mohamad Moukayed</h3>
                </div>
                <div class="halfflexchild">
                    <h3 class="footertext">Al Mawakeb Al Barsha Model United Nations</h3>
                    <p class="footertext">An exciting opportunity for Mawakeb students to discuss into global issues,
                        creating space for leaders to shine and illuminating important matters. By students, for
                        studentsâ€”an opportunity to voice your perspectives and concerns.</p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        if (userAgent.toLowerCase().indexOf("iphone") || userAgent.toLowerCase().indexOf("android")) {
            var subroots = document.getElementsByClassName("subrootcontainer");
            for (var i = 0; i < subroots.length; i++) {
                // subroots[i].style.height = window.screen.height + "px";
            }
        }
    </script>
</body>

</html>